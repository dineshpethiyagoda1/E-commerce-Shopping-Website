{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\akala\\\\Downloads\\\\shophub-ecommerce\\\\frontend\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\nimport { cartAPI } from '../utils/api';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext(null);\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  var _cart$items;\n  const {\n    isAuthenticated\n  } = useAuth();\n  const [cart, setCart] = useState({\n    items: [],\n    totalPrice: 0\n  });\n  const [loading, setLoading] = useState(false);\n  const fetchCart = useCallback(async () => {\n    if (!isAuthenticated) {\n      setCart({\n        items: [],\n        totalPrice: 0\n      });\n      return;\n    }\n    try {\n      const res = await cartAPI.get();\n      setCart(res.data);\n    } catch (err) {\n      console.error('Cart fetch error:', err);\n    }\n  }, [isAuthenticated]);\n  useEffect(() => {\n    fetchCart();\n  }, [fetchCart]);\n  const addToCart = async (productId, quantity = 1) => {\n    setLoading(true);\n    try {\n      const res = await cartAPI.add(productId, quantity);\n      setCart(res.data);\n      return {\n        success: true\n      };\n    } catch (err) {\n      var _err$response, _err$response$data;\n      return {\n        success: false,\n        message: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to add to cart'\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateQuantity = async (itemId, quantity) => {\n    try {\n      const res = await cartAPI.update(itemId, quantity);\n      setCart(res.data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const removeFromCart = async itemId => {\n    try {\n      const res = await cartAPI.remove(itemId);\n      setCart(res.data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const clearCart = async () => {\n    try {\n      const res = await cartAPI.clear();\n      setCart(res.data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const cartCount = ((_cart$items = cart.items) === null || _cart$items === void 0 ? void 0 : _cart$items.reduce((sum, item) => sum + item.quantity, 0)) || 0;\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      loading,\n      cartCount,\n      addToCart,\n      updateQuantity,\n      removeFromCart,\n      clearCart,\n      fetchCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"c1c4avw98uH8Y/l6N/Od8VcjpCI=\", false, function () {\n  return [useAuth];\n});\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  const context = useContext(CartContext);\n  if (!context) throw new Error('useCart must be used within CartProvider');\n  return context;\n};\n_s2(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport default CartContext;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","useCallback","cartAPI","useAuth","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","_cart$items","isAuthenticated","cart","setCart","items","totalPrice","loading","setLoading","fetchCart","res","get","data","err","console","error","addToCart","productId","quantity","add","success","_err$response","_err$response$data","message","response","updateQuantity","itemId","update","removeFromCart","remove","clearCart","clear","cartCount","reduce","sum","item","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/akala/Downloads/shophub-ecommerce/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\r\nimport { cartAPI } from '../utils/api';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst CartContext = createContext(null);\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const { isAuthenticated } = useAuth();\r\n  const [cart, setCart] = useState({ items: [], totalPrice: 0 });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchCart = useCallback(async () => {\r\n    if (!isAuthenticated) { setCart({ items: [], totalPrice: 0 }); return; }\r\n    try {\r\n      const res = await cartAPI.get();\r\n      setCart(res.data);\r\n    } catch (err) {\r\n      console.error('Cart fetch error:', err);\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, [fetchCart]);\r\n\r\n  const addToCart = async (productId, quantity = 1) => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await cartAPI.add(productId, quantity);\r\n      setCart(res.data);\r\n      return { success: true };\r\n    } catch (err) {\r\n      return { success: false, message: err.response?.data?.message || 'Failed to add to cart' };\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateQuantity = async (itemId, quantity) => {\r\n    try {\r\n      const res = await cartAPI.update(itemId, quantity);\r\n      setCart(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const removeFromCart = async (itemId) => {\r\n    try {\r\n      const res = await cartAPI.remove(itemId);\r\n      setCart(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const clearCart = async () => {\r\n    try {\r\n      const res = await cartAPI.clear();\r\n      setCart(res.data);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const cartCount = cart.items?.reduce((sum, item) => sum + item.quantity, 0) || 0;\r\n\r\n  return (\r\n    <CartContext.Provider value={{ cart, loading, cartCount, addToCart, updateQuantity, removeFromCart, clearCart, fetchCart }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCart = () => {\r\n  const context = useContext(CartContext);\r\n  if (!context) throw new Error('useCart must be used within CartProvider');\r\n  return context;\r\n};\r\n\r\nexport default CartContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}